(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(r){"use strict";r.overlayMode=function(o,a,n){return{startState:function(){return{base:r.startState(o),overlay:r.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:r.copyState(o,e.base),overlay:r.copyState(a,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,r){if(e!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<e.start){r.streamSeen=e;r.basePos=r.overlayPos=e.start}if(e.start==r.basePos){r.baseCur=o.token(e,r.base);r.basePos=e.pos}if(e.start==r.overlayPos){e.pos=e.start;r.overlayCur=a.token(e,r.overlay);r.overlayPos=e.pos}e.pos=Math.min(r.basePos,r.overlayPos);if(r.overlayCur==null)return r.baseCur;else if(r.baseCur!=null&&r.overlay.combineTokens||n&&r.overlay.combineTokens==null)return r.baseCur+" "+r.overlayCur;else return r.overlayCur},indent:o.indent&&function(e,r){return o.indent(e.base,r)},electricChars:o.electricChars,innerMode:function(e){return{state:e.base,mode:o}},blankLine:function(e){if(o.blankLine)o.blankLine(e.base);if(a.blankLine)a.blankLine(e.overlay)}}}});