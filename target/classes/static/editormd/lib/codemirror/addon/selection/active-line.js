(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(r){"use strict";var o="CodeMirror-activeline";var s="CodeMirror-activeline-background";r.defineOption("styleActiveLine",false,function(e,t,i){var n=i&&i!=r.Init;if(t&&!n){e.state.activeLines=[];a(e,e.listSelections());e.on("beforeSelectionChange",l)}else if(!t&&n){e.off("beforeSelectionChange",l);f(e);delete e.state.activeLines}});function f(e){for(var t=0;t<e.state.activeLines.length;t++){e.removeLineClass(e.state.activeLines[t],"wrap",o);e.removeLineClass(e.state.activeLines[t],"background",s)}}function c(e,t){if(e.length!=t.length)return false;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return false;return true}function a(t,e){var i=[];for(var n=0;n<e.length;n++){var r=e[n];if(!r.empty())continue;var a=t.getLineHandleVisualStart(r.head.line);if(i[i.length-1]!=a)i.push(a)}if(c(t.state.activeLines,i))return;t.operation(function(){f(t);for(var e=0;e<i.length;e++){t.addLineClass(i[e],"wrap",o);t.addLineClass(i[e],"background",s)}t.state.activeLines=i})}function l(e,t){a(e,t.ranges)}});