(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(n){"use strict";n.defineOption("styleSelectedText",false,function(e,t,r){var i=r&&r!=n.Init;if(t&&!i){e.state.markedSelection=[];e.state.markedSelectionStyle=typeof t=="string"?t:"CodeMirror-selectedtext";c(e);e.on("cursorActivity",o);e.on("change",l)}else if(!t&&i){e.off("cursorActivity",o);e.off("change",l);a(e);e.state.markedSelection=e.state.markedSelectionStyle=null}});function o(e){e.operation(function(){t(e)})}function l(e){if(e.state.markedSelection.length)e.operation(function(){a(e)})}var u=8;var m=n.Pos;var v=n.cmpPos;function f(e,t,r,i){if(v(t,r)==0)return;var n=e.state.markedSelection;var o=e.state.markedSelectionStyle;for(var l=t.line;;){var f=l==t.line?t:m(l,0);var a=l+u,c=a>=r.line;var s=c?r:m(a,0);var d=e.markText(f,s,{className:o});if(i==null)n.push(d);else n.splice(i++,0,d);if(c)break;l=a}}function a(e){var t=e.state.markedSelection;for(var r=0;r<t.length;++r)t[r].clear();t.length=0}function c(e){a(e);var t=e.listSelections();for(var r=0;r<t.length;r++)f(e,t[r].from(),t[r].to())}function t(e){if(!e.somethingSelected())return a(e);if(e.listSelections().length>1)return c(e);var t=e.getCursor("start"),r=e.getCursor("end");var i=e.state.markedSelection;if(!i.length)return f(e,t,r);var n=i[0].find(),o=i[i.length-1].find();if(!n||!o||r.line-t.line<u||v(t,o.to)>=0||v(r,n.from)<=0)return c(e);while(v(t,n.from)>0){i.shift().clear();n=i[0].find()}if(v(t,n.from)<0){if(n.to.line-t.line<u){i.shift().clear();f(e,t,n.to,0)}else{f(e,t,n.from,0)}}while(v(r,o.to)<0){i.pop().clear();o=i[i.length-1].find()}if(v(r,o.to)>0){if(r.line-o.from.line<u){i.pop().clear();f(e,o.from,r)}else{f(e,o.to,r)}}}});