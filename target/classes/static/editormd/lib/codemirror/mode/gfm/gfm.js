(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"),require("../markdown/markdown"),require("../../addon/mode/overlay"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror","../markdown/markdown","../../addon/mode/overlay"],e);else e(CodeMirror)})(function(i){"use strict";i.defineMode("gfm",function(e,o){var t=0;function r(e){e.code=false;return null}var n={startState:function(){return{code:false,codeBlock:false,ateSpace:false}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,o){o.combineTokens=null;if(o.codeBlock){if(e.match(/^```/)){o.codeBlock=false;return null}e.skipToEnd();return null}if(e.sol()){o.code=false}if(e.sol()&&e.match(/^```/)){e.skipToEnd();o.codeBlock=true;return null}if(e.peek()==="`"){e.next();var r=e.pos;e.eatWhile("`");var n=1+e.pos-r;if(!o.code){t=n;o.code=true}else{if(n===t){o.code=false}}return null}else if(o.code){e.next();return null}if(e.eatSpace()){o.ateSpace=true;return null}if(e.sol()||o.ateSpace){o.ateSpace=false;if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/)){o.combineTokens=true;return"link"}else if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/)){o.combineTokens=true;return"link"}}if(e.match(/^((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i)&&e.string.slice(e.start-2,e.start)!="]("){o.combineTokens=true;return"link"}e.next();return null},blankLine:r};var a={underscoresBreakWords:false,taskLists:true,fencedCodeBlocks:true,strikethrough:true};for(var c in o){a[c]=o[c]}a.name="markdown";i.defineMIME("gfmBase",a);return i.overlayMode(i.getMode(e,"gfmBase"),n)},"markdown")});