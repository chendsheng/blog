(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(i){"use strict";function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}var _=n(["and","or","not","is"]);var z=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"];var R=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];var S={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]};var T={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};i.registerHelper("hintWords","python",z.concat(R));function I(e){return e.scopes[e.scopes.length-1]}i.defineMode("python",function(a,o){var s="error";var l=o.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]");var f=o.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))");var u=o.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))");var c=o.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))");if(o.version&&parseInt(o.version,10)==3){var p=o.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!@]");var d=o.identifiers||new RegExp("^[_A-Za-z¡-￿][_A-Za-z0-9¡-￿]*")}else{var p=o.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]");var d=o.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*")}var m=o.hangingIndent||a.indentUnit;var e=z,t=R;if(o.extra_keywords!=undefined){e=e.concat(o.extra_keywords)}if(o.extra_builtins!=undefined){t=t.concat(o.extra_builtins)}if(o.version&&parseInt(o.version,10)==3){e=e.concat(T.keywords);t=t.concat(T.builtins);var h=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{e=e.concat(S.keywords);t=t.concat(S.builtins);var h=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var y=n(e);var v=n(t);function b(e,t){if(e.sol()&&I(t).type=="py"){var r=I(t).offset;if(e.eatSpace()){var n=e.indentation();if(n>r)w(e,t,"py");else if(n<r&&k(e,t))t.errorToken=true;return null}else{var i=g(e,t);if(r>0&&k(e,t))i+=" "+s;return i}}return g(e,t)}function g(e,t){if(e.eatSpace())return null;var r=e.peek();if(r=="#"){e.skipToEnd();return"comment"}if(e.match(/^[0-9\.]/,false)){var n=false;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)){n=true}if(e.match(/^\d+\.\d*/)){n=true}if(e.match(/^\.\d+/)){n=true}if(n){e.eat(/J/i);return"number"}var i=false;if(e.match(/^0x[0-9a-f]+/i))i=true;if(e.match(/^0b[01]+/i))i=true;if(e.match(/^0o[0-7]+/i))i=true;if(e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){e.eat(/J/i);i=true}if(e.match(/^0(?![\dx])/i))i=true;if(i){e.eat(/L/i);return"number"}}if(e.match(h)){t.tokenize=x(e.current());return t.tokenize(e,t)}if(e.match(c)||e.match(u))return null;if(e.match(f)||e.match(p)||e.match(_))return"operator";if(e.match(l))return null;if(e.match(y))return"keyword";if(e.match(v))return"builtin";if(e.match(/^(self|cls)\b/))return"variable-2";if(e.match(d)){if(t.lastToken=="def"||t.lastToken=="class")return"def";return"variable"}e.next();return s}function x(r){while("rub".indexOf(r.charAt(0).toLowerCase())>=0)r=r.substr(1);var n=r.length==1;var i="string";function e(e,t){while(!e.eol()){e.eatWhile(/[^'"\\]/);if(e.eat("\\")){e.next();if(n&&e.eol())return i}else if(e.match(r)){t.tokenize=b;return i}else{e.eat(/['"]/)}}if(n){if(o.singleLineStringErrors)return s;else t.tokenize=b}return i}e.isString=true;return e}function w(e,t,r){var n=0,i=null;if(r=="py"){while(I(t).type!="py")t.scopes.pop()}n=I(t).offset+(r=="py"?a.indentUnit:m);if(r!="py"&&!e.match(/^(\s|#.*)*$/,false))i=e.column()+1;t.scopes.push({offset:n,type:r,align:i})}function k(e,t){var r=e.indentation();while(I(t).offset>r){if(I(t).type!="py")return true;t.scopes.pop()}return I(t).offset!=r}function E(e,t){var r=t.tokenize(e,t);var n=e.current();if(n=="."){r=e.match(d,false)?null:s;if(r==null&&t.lastStyle=="meta"){r="meta"}return r}if(n=="@"){if(o.version&&parseInt(o.version,10)==3){return e.match(d,false)?"meta":"operator"}else{return e.match(d,false)?"meta":s}}if((r=="variable"||r=="builtin")&&t.lastStyle=="meta")r="meta";if(n=="pass"||n=="return")t.dedent+=1;if(n=="lambda")t.lambda=true;if(n==":"&&!t.lambda&&I(t).type=="py")w(e,t,"py");var i=n.length==1?"[({".indexOf(n):-1;if(i!=-1)w(e,t,"])}".slice(i,i+1));i="])}".indexOf(n);if(i!=-1){if(I(t).type==n)t.scopes.pop();else return s}if(t.dedent>0&&e.eol()&&I(t).type=="py"){if(t.scopes.length>1)t.scopes.pop();t.dedent-=1}return r}var r={startState:function(e){return{tokenize:b,scopes:[{offset:e||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:false,dedent:0}},token:function(e,t){var r=t.errorToken;if(r)t.errorToken=false;var n=E(e,t);t.lastStyle=n;var i=e.current();if(i&&n)t.lastToken=i;if(e.eol()&&t.lambda)t.lambda=false;return r?n+" "+s:n},indent:function(e,t){if(e.tokenize!=b)return e.tokenize.isString?i.Pass:0;var r=I(e);var n=t&&t.charAt(0)==r.type;if(r.align!=null)return r.align-(n?1:0);else if(n&&e.scopes.length>1)return e.scopes[e.scopes.length-2].offset;else return r.offset},lineComment:"#",fold:"indent"};return r});i.defineMIME("text/x-python","python");var e=function(e){return e.split(" ")};i.defineMIME("text/x-cython",{name:"python",extra_keywords:e("by cdef cimport cpdef ctypedef enum except"+"extern gil include nogil property public"+"readonly struct union DEF IF ELIF ELSE")})});