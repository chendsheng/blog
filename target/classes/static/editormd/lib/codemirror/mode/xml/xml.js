(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(M){"use strict";M.defineMode("xml",function(e,t){var o=e.indentUnit;var a=t.multilineTagIndentFactor||1;var l=t.multilineTagIndentPastTag;if(l==null)l=true;var f=t.htmlMode?{autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true,menuitem:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true,caseFold:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,caseFold:false};var s=t.alignCDATA;var i,d;function c(t,r){function e(e){r.tokenize=e;return e(t,r)}var n=t.next();if(n=="<"){if(t.eat("!")){if(t.eat("[")){if(t.match("CDATA["))return e(g("atom","]]>"));else return null}else if(t.match("--")){return e(g("comment","--\x3e"))}else if(t.match("DOCTYPE",true,true)){t.eatWhile(/[\w\._\-]/);return e(h(1))}else{return null}}else if(t.eat("?")){t.eatWhile(/[\w\._\-]/);r.tokenize=g("meta","?>");return"meta"}else{i=t.eat("/")?"closeTag":"openTag";r.tokenize=m;return"tag bracket"}}else if(n=="&"){var u;if(t.eat("#")){if(t.eat("x")){u=t.eatWhile(/[a-fA-F\d]/)&&t.eat(";")}else{u=t.eatWhile(/[\d]/)&&t.eat(";")}}else{u=t.eatWhile(/[\w\.\-:]/)&&t.eat(";")}return u?"atom":"error"}else{t.eatWhile(/[^&<]/);return null}}function m(e,t){var r=e.next();if(r==">"||r=="/"&&e.eat(">")){t.tokenize=c;i=r==">"?"endTag":"selfcloseTag";return"tag bracket"}else if(r=="="){i="equals";return null}else if(r=="<"){t.tokenize=c;t.state=k;t.tagName=t.tagStart=null;var n=t.tokenize(e,t);return n?n+" tag error":"tag error"}else if(/[\'\"]/.test(r)){t.tokenize=u(r);t.stringStartCol=e.column();return t.tokenize(e,t)}else{e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}}function u(r){var e=function(e,t){while(!e.eol()){if(e.next()==r){t.tokenize=m;break}}return"string"};e.isInAttribute=true;return e}function g(r,n){return function(e,t){while(!e.eol()){if(e.match(n)){t.tokenize=c;break}e.next()}return r}}function h(n){return function(e,t){var r;while((r=e.next())!=null){if(r=="<"){t.tokenize=h(n+1);return t.tokenize(e,t)}else if(r==">"){if(n==1){t.tokenize=c;break}else{t.tokenize=h(n-1);return t.tokenize(e,t)}}}return"meta"}}function p(e,t,r){this.prev=e.context;this.tagName=t;this.indent=e.indented;this.startOfLine=r;if(f.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)this.noIndent=true}function x(e){if(e.context)e.context=e.context.prev}function b(e,t){var r;while(true){if(!e.context){return}r=e.context.tagName;if(!f.contextGrabbers.hasOwnProperty(r)||!f.contextGrabbers[r].hasOwnProperty(t)){return}x(e)}}function k(e,t,r){if(e=="openTag"){r.tagStart=t.column();return n}else if(e=="closeTag"){return w}else{return k}}function n(e,t,r){if(e=="word"){r.tagName=t.current();d="tag";return z}else{d="error";return n}}function w(e,t,r){if(e=="word"){var n=t.current();if(r.context&&r.context.tagName!=n&&f.implicitlyClosed.hasOwnProperty(r.context.tagName))x(r);if(r.context&&r.context.tagName==n){d="tag";return v}else{d="tag error";return y}}else{d="error";return y}}function v(e,t,r){if(e!="endTag"){d="error";return v}x(r);return k}function y(e,t,r){d="error";return v(e,t,r)}function z(e,t,r){if(e=="word"){d="attribute";return N}else if(e=="endTag"||e=="selfcloseTag"){var n=r.tagName,u=r.tagStart;r.tagName=r.tagStart=null;if(e=="selfcloseTag"||f.autoSelfClosers.hasOwnProperty(n)){b(r,n)}else{b(r,n);r.context=new p(r,n,u==r.indented)}return k}d="error";return z}function N(e,t,r){if(e=="equals")return T;if(!f.allowMissing)d="error";return z(e,t,r)}function T(e,t,r){if(e=="string")return C;if(e=="word"&&f.allowUnquoted){d="string";return z}d="error";return z(e,t,r)}function C(e,t,r){if(e=="string")return C;return z(e,t,r)}return{startState:function(){return{tokenize:c,state:k,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol())t.indented=e.indentation();if(e.eatSpace())return null;i=null;var r=t.tokenize(e,t);if((r||i)&&r!="comment"){d=null;t.state=t.state(i||r,e,t);if(d)r=d=="error"?r+" error":d}return r},indent:function(e,t,r){var n=e.context;if(e.tokenize.isInAttribute){if(e.tagStart==e.indented)return e.stringStartCol+1;else return e.indented+o}if(n&&n.noIndent)return M.Pass;if(e.tokenize!=m&&e.tokenize!=c)return r?r.match(/^(\s*)/)[0].length:0;if(e.tagName){if(l)return e.tagStart+e.tagName.length+2;else return e.tagStart+o*a}if(s&&/<!\[CDATA\[/.test(t))return 0;var u=t&&/^<(\/)?([\w_:\.-]*)/.exec(t);if(u&&u[1]){while(n){if(n.tagName==u[2]){n=n.prev;break}else if(f.implicitlyClosed.hasOwnProperty(n.tagName)){n=n.prev}else{break}}}else if(u){while(n){var i=f.contextGrabbers[n.tagName];if(i&&i.hasOwnProperty(u[2]))n=n.prev;else break}}while(n&&!n.startOfLine)n=n.prev;if(n)return n.indent+o;else return 0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:t.htmlMode?"html":"xml",helperType:t.htmlMode?"html":"xml"}});M.defineMIME("text/xml","xml");M.defineMIME("application/xml","xml");if(!M.mimeModes.hasOwnProperty("text/html"))M.defineMIME("text/html",{name:"xml",htmlMode:true})});