(function(){var i=function(u){var m=jQuery;var p="html-entities-dialog";var b=[];var k=[];u.fn.htmlEntitiesDialog=function(){var e=this;var t=this.cm;var i=e.lang;var a=e.settings;var n=a.pluginPath+p+"/";var o=this.editor;var l=t.getCursor();var r=t.getSelection();var s=e.classPrefix;var d=s+"dialog-"+p,c;var f=i.dialog.htmlEntities;var h=['<div class="'+s+'html-entities-box" style="width: 760px;height: 334px;margin-bottom: 8px;overflow: hidden;overflow-y: auto;">','<div class="'+s+'grid-table">',"</div>","</div>"].join("\r\n");t.focus();if(o.find("."+d).length>0){c=o.find("."+d);b=[];c.find("a").removeClass("selected");this.dialogShowMask(c);this.dialogLockScreen();c.show()}else{c=this.createDialog({name:d,title:f.title,width:800,height:475,mask:a.dialogShowMask,drag:a.dialogDraggable,content:h,lockScreen:a.dialogLockScreen,maskStyle:{opacity:a.dialogMaskOpacity,backgroundColor:a.dialogMaskBgColor},buttons:{enter:[i.buttons.enter,function(){t.replaceSelection(b.join(" "));this.hide().lockScreen(false).hideMask();return false}],cancel:[i.buttons.cancel,function(){this.hide().lockScreen(false).hideMask();return false}]}})}var g=c.find("."+s+"grid-table");var v=function(){if(k.length<1)return;var e=20;var t=Math.ceil(k.length/e);g.html("");for(var i=0;i<t;i++){var a='<div class="'+s+'grid-table-row">';for(var n=0;n<e;n++){var o=k[i*e+n];if(typeof o!=="undefined"){var l=o.name.replace("&amp;","&");a+='<a href="javascript:;" value="'+o.name+'" title="'+l+'" class="'+s+'html-entity-btn">'+l+"</a>"}}a+="</div>";g.append(a)}c.find("."+s+"html-entity-btn").bind(u.mouseOrTouch("click","touchend"),function(){m(this).toggleClass("selected");if(m(this).hasClass("selected")){b.push(m(this).attr("value"))}})};if(k.length<1){if(typeof c.loading=="function")c.loading(true);m.getJSON(n+p.replace("-dialog","")+".json",function(e){if(typeof c.loading=="function")c.loading(false);k=e;v()})}else{v()}}};if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=i}else if(typeof define==="function"){if(define.amd){define(["editormd"],function(e){i(e)})}else{define(function(e){var t=e("./../../editormd");i(t)})}}else{i(window.editormd)}})();