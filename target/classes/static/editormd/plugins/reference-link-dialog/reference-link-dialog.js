(function(){var a=function(e){var c="reference-link-dialog";var v=1;e.fn.referenceLinkDialog=function(){var e=this;var l=this.cm;var t=this.lang;var a=this.editor;var i=this.settings;var r=l.getCursor();var n=l.getSelection();var d=t.dialog.referenceLink;var o=this.classPrefix;var s=o+c,f;l.focus();if(a.find("."+s).length<1){var u='<div class="'+o+'form">'+"<label>"+d.name+"</label>"+'<input type="text" value="['+v+']" data-name />'+"<br/>"+"<label>"+d.urlId+"</label>"+'<input type="text" data-url-id />'+"<br/>"+"<label>"+d.url+"</label>"+'<input type="text" value="http://" data-url />'+"<br/>"+"<label>"+d.urlTitle+"</label>"+'<input type="text" value="'+n+'" data-title />'+"<br/>"+"</div>";f=this.createDialog({name:s,title:d.title,width:380,height:296,content:u,mask:i.dialogShowMask,drag:i.dialogDraggable,lockScreen:i.dialogLockScreen,maskStyle:{opacity:i.dialogMaskOpacity,backgroundColor:i.dialogMaskBgColor},buttons:{enter:[t.buttons.enter,function(){var e=this.find("[data-name]").val();var t=this.find("[data-url]").val();var a=this.find("[data-url-id]").val();var i=this.find("[data-title]").val();if(e===""){alert(d.nameEmpty);return false}if(a===""){alert(d.idEmpty);return false}if(t==="http://"||t===""){alert(d.urlEmpty);return false}l.replaceSelection("["+e+"]["+a+"]");if(n===""){l.setCursor(r.line,r.ch+1)}i=i===""?"":' "'+i+'"';l.setValue(l.getValue()+"\n["+a+"]: "+t+i+"");this.hide().lockScreen(false).hideMask();return false}],cancel:[t.buttons.cancel,function(){this.hide().lockScreen(false).hideMask();return false}]}})}f=a.find("."+s);f.find("[data-name]").val("["+v+"]");f.find("[data-url-id]").val("");f.find("[data-url]").val("http://");f.find("[data-title]").val(n);this.dialogShowMask(f);this.dialogLockScreen();f.show();v++}};if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=a}else if(typeof define==="function"){if(define.amd){define(["editormd"],function(e){a(e)})}else{define(function(e){var t=e("./../../editormd");a(t)})}}else{a(window.editormd)}})();