(function(){var a=function(S){var C=jQuery;var E="emoji-dialog";var M=0;var q=[];var _=[];var O="editormd-logo";var T=[O,O+"-1x",O+"-2x",O+"-3x",O+"-4x",O+"-5x",O+"-6x",O+"-7x",O+"-8x"];var D={"zh-cn":{toolbar:{emoji:"Emoji 表情"},dialog:{emoji:{title:"Emoji 表情"}}},"zh-tw":{toolbar:{emoji:"Emoji 表情"},dialog:{emoji:{title:"Emoji 表情"}}},en:{toolbar:{emoji:"Emoji"},dialog:{emoji:{title:"Emoji"}}}};S.fn.emojiDialog=function(){var e=this;var i=this.cm;var a=e.settings;if(!a.emoji){alert("settings.emoji == false");return}var t=a.pluginPath+E+"/";var o=this.editor;var l=i.getCursor();var r=i.getSelection();var m=this.classPrefix;C.extend(true,this.lang,D[this.lang.name]);this.setToolbar();var s=this.lang;var n=m+E,d;var c=s.dialog.emoji;var f=['<div class="'+m+'emoji-dialog-box" style="width: 760px;height: 334px;margin-bottom: 8px;overflow: hidden;">','<div class="'+m+'tab"></div>',"</div>"].join("\n");i.focus();if(o.find("."+n).length>0){d=o.find("."+n);_=[];d.find("a").removeClass("selected");this.dialogShowMask(d);this.dialogLockScreen();d.show()}else{d=this.createDialog({name:n,title:c.title,width:800,height:475,mask:a.dialogShowMask,drag:a.dialogDraggable,content:f,lockScreen:a.dialogLockScreen,maskStyle:{opacity:a.dialogMaskOpacity,backgroundColor:a.dialogMaskBgColor},buttons:{enter:[s.buttons.enter,function(){i.replaceSelection(_.join(" "));this.hide().lockScreen(false).hideMask();return false}],cancel:[s.buttons.cancel,function(){this.hide().lockScreen(false).hideMask();return false}]}})}var v=["Github emoji","Twemoji","Font awesome","Editor.md logo"];var h=d.find("."+m+"tab");if(h.html()===""){var g='<ul class="'+m+'tab-head">';for(var u=0;u<4;u++){var j=u===0?' class="active"':"";g+="<li"+j+'><a href="javascript:;">'+v[u]+"</a></li>"}g+="</ul>";h.append(g);var p='<div class="'+m+'tab-container">';for(var b=0;b<4;b++){var w=b===0?"":"display:none;";p+='<div class="'+m+'tab-box" style="height: 260px;overflow: hidden;overflow-y: auto;'+w+'"></div>'}p+="</div>";h.append(p)}var x=h.find("."+m+"tab-box");var y=["github-emoji","twemoji","font-awesome",O];var k=function(){var e=y[M];var i=q[e];var a=x.eq(M);if(a.html()!==""){return}var t=function(e,i){var a=i==="editormd-logo"?"5":20;var t=Math.ceil(e.length/a);var o='<div class="'+m+'grid-table">';for(var l=0;l<t;l++){var r='<div class="'+m+'grid-table-row">';for(var s=0;s<a;s++){var n=C.trim(e[l*a+s]);if(typeof n!=="undefined"&&n!==""){var d="",c="";if(i==="github-emoji"){var f=n==="+1"?"plus1":n;f=f==="black_large_square"?"black_square":f;f=f==="moon"?"waxing_gibbous_moon":f;f=S.emoji.path+f+S.emoji.ext;d='<img src="'+f+'" width="24" class="emoji" title="&#58;'+n+'&#58;" alt="&#58;'+n+'&#58;" />';r+='<a href="javascript:;" value=":'+n+':" title=":'+n+':" class="'+m+'emoji-btn">'+d+"</a>"}else if(i==="twemoji"){var v=S.twemoji.path+n+S.twemoji.ext;d='<img src="'+v+'" width="24" title="twemoji-'+n+'" alt="twemoji-'+n+'" class="emoji twemoji" />';r+='<a href="javascript:;" value=":tw-'+n+':" title=":tw-'+n+':" class="'+m+'emoji-btn">'+d+"</a>"}else if(i==="font-awesome"){c='<i class="fa fa-'+n+' fa-emoji" title="'+n+'"></i>';r+='<a href="javascript:;" value=":fa-'+n+':" title=":fa-'+n+':" class="'+m+'emoji-btn">'+c+"</a>"}else if(i==="editormd-logo"){c='<i class="'+n+'" title="Editor.md logo ('+n+')"></i>';r+='<a href="javascript:;" value=":'+n+':" title=":'+n+':" style="width:20%;" class="'+m+'emoji-btn">'+c+"</a>"}}else{r+='<a href="javascript:;" value=""></a>'}}r+="</div>";o+=r}o+="</div>";return o};if(M===0){for(var o=0,l=i.length;o<l;o++){var r=o===0?' style="margin: 0 0 10px;"':' style="margin: 10px 0;"';a.append("<h4"+r+">"+i[o].category+"</h4>");a.append(t(i[o].list,e))}}else{a.append(t(i,e))}a.find("."+m+"emoji-btn").bind(S.mouseOrTouch("click","touchend"),function(){C(this).toggleClass("selected");if(C(this).hasClass("selected")){_.push(C(this).attr("value"))}})};if(q.length<1){if(typeof d.loading==="function"){d.loading(true)}C.getJSON(t+"emoji.json?temp="+Math.random(),function(e){if(typeof d.loading==="function"){d.loading(false)}q=e;q[O]=T;k()})}else{k()}h.find("li").bind(S.mouseOrTouch("click","touchend"),function(){var e=C(this);M=e.index();e.addClass("active").siblings().removeClass("active");x.eq(M).show().siblings().hide();k()})}};if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=a}else if(typeof define==="function"){if(define.amd){define(["editormd"],function(e){a(e)})}else{define(function(e){var i=e("./../../editormd");a(i)})}}else{a(window.editormd)}})();