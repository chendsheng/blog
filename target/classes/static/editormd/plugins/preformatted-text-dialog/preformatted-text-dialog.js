(function(){var r=function(v){var m;var p="preformatted-text-dialog";v.fn.preformattedTextDialog=function(){var e=this;var r=this.cm;var t=this.lang;var i=this.editor;var o=this.settings;var a=r.getCursor();var n=r.getSelection();var l=this.classPrefix;var d=t.dialog.preformattedText;var s=l+p,f;r.focus();if(i.find("."+s).length>0){f=i.find("."+s);f.find("textarea").val(n);this.dialogShowMask(f);this.dialogLockScreen();f.show()}else{var c='<textarea placeholder="coding now...." style="display:none;">'+n+"</textarea>";f=this.createDialog({name:s,title:d.title,width:780,height:540,mask:o.dialogShowMask,drag:o.dialogDraggable,content:c,lockScreen:o.dialogLockScreen,maskStyle:{opacity:o.dialogMaskOpacity,backgroundColor:o.dialogMaskBgColor},buttons:{enter:[t.buttons.enter,function(){var e=this.find("textarea").val();if(e===""){alert(d.emptyAlert);return false}e=e.split("\n");for(var t in e){e[t]="    "+e[t]}e=e.join("\n");if(a.ch!==0){e="\r\n\r\n"+e}r.replaceSelection(e);this.hide().lockScreen(false).hideMask();return false}],cancel:[t.buttons.cancel,function(){this.hide().lockScreen(false).hideMask();return false}]}})}var u={mode:"text/html",theme:o.theme,tabSize:4,autofocus:true,autoCloseTags:true,indentUnit:4,lineNumbers:true,lineWrapping:true,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:true,indentWithTabs:true,styleActiveLine:true,styleSelectedText:true,autoCloseBrackets:true,showTrailingSpace:true,highlightSelectionMatches:true};var h=f.find("textarea");var g=f.find(".CodeMirror");if(f.find(".CodeMirror").length<1){m=v.$CodeMirror.fromTextArea(h[0],u);g=f.find(".CodeMirror");g.css({float:"none",margin:"0 0 5px",border:"1px solid #ddd",fontSize:o.fontSize,width:"100%",height:"410px"});m.on("change",function(e){h.val(e.getValue())})}else{m.setValue(r.getSelection())}}};if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=r}else if(typeof define==="function"){if(define.amd){define(["editormd"],function(e){r(e)})}else{define(function(e){var t=e("./../../editormd");r(t)})}}else{r(window.editormd)}})();