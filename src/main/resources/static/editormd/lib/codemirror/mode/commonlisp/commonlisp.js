(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("commonlisp",function(r){var i=/^(block|let*|return-from|catch|load-time-value|setq|eval-when|locally|symbol-macrolet|flet|macrolet|tagbody|function|multiple-value-call|the|go|multiple-value-prog1|throw|if|progn|unwind-protect|labels|progv|let|quote)$/;var o=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/;var l=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/;var n=/[^\s'`,@()\[\]";]/;var u;function c(e){var t;while(t=e.next()){if(t=="\\")e.next();else if(!n.test(t)){e.backUp(1);break}}return e.current()}function s(e,t){if(e.eatSpace()){u="ws";return null}if(e.match(l))return"number";var n=e.next();if(n=="\\")n=e.next();if(n=='"')return(t.tokenize=f)(e,t);else if(n=="("){u="open";return"bracket"}else if(n==")"||n=="]"){u="close";return"bracket"}else if(n==";"){e.skipToEnd();u="ws";return"comment"}else if(/['`,@]/.test(n))return null;else if(n=="|"){if(e.skipTo("|")){e.next();return"symbol"}else{e.skipToEnd();return"error"}}else if(n=="#"){var n=e.next();if(n=="["){u="open";return"bracket"}else if(/[+\-=\.']/.test(n))return null;else if(/\d/.test(n)&&e.match(/^\d*#/))return null;else if(n=="|")return(t.tokenize=a)(e,t);else if(n==":"){c(e);return"meta"}else return"error"}else{var r=c(e);if(r==".")return null;u="symbol";if(r=="nil"||r=="t"||r.charAt(0)==":")return"atom";if(t.lastType=="open"&&(i.test(r)||o.test(r)))return"keyword";if(r.charAt(0)=="&")return"variable-2";return"variable"}}function f(e,t){var n=false,r;while(r=e.next()){if(r=='"'&&!n){t.tokenize=s;break}n=!n&&r=="\\"}return"string"}function a(e,t){var n,r;while(n=e.next()){if(n=="#"&&r=="|"){t.tokenize=s;break}r=n}u="ws";return"comment"}return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},lastType:null,tokenize:s}},token:function(e,t){if(e.sol()&&typeof t.ctx.indentTo!="number")t.ctx.indentTo=t.ctx.start+1;u=null;var n=t.tokenize(e,t);if(u!="ws"){if(t.ctx.indentTo==null){if(u=="symbol"&&o.test(e.current()))t.ctx.indentTo=t.ctx.start+r.indentUnit;else t.ctx.indentTo="next"}else if(t.ctx.indentTo=="next"){t.ctx.indentTo=e.column()}t.lastType=u}if(u=="open")t.ctx={prev:t.ctx,start:e.column(),indentTo:null};else if(u=="close")t.ctx=t.ctx.prev||t.ctx;return n},indent:function(e,t){var n=e.ctx.indentTo;return typeof n=="number"?n:e.ctx.start+1},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}});e.defineMIME("text/x-common-lisp","commonlisp")});