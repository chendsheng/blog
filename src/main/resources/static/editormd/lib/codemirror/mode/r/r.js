(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("r",function(l){function e(e){var t=e.split(" "),n={};for(var r=0;r<t.length;++r)n[t[r]]=true;return n}var i=e("NULL NA Inf NaN NA_integer_ NA_real_ NA_complex_ NA_character_");var a=e("list quote bquote eval return call parse deparse");var f=e("if else repeat while function for in next break");var u=e("if else repeat while function for");var o=/[+\-*\/^<>=!&|~$:]/;var s;function c(e,t){s=null;var n=e.next();if(n=="#"){e.skipToEnd();return"comment"}else if(n=="0"&&e.eat("x")){e.eatWhile(/[\da-f]/i);return"number"}else if(n=="."&&e.eat(/\d/)){e.match(/\d*(?:e[+\-]?\d+)?/);return"number"}else if(/\d/.test(n)){e.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/);return"number"}else if(n=="'"||n=='"'){t.tokenize=d(n);return"string"}else if(n=="."&&e.match(/.[.\d]+/)){return"keyword"}else if(/[\w\.]/.test(n)&&n!="_"){e.eatWhile(/[\w\.]/);var r=e.current();if(i.propertyIsEnumerable(r))return"atom";if(f.propertyIsEnumerable(r)){if(u.propertyIsEnumerable(r)&&!e.match(/\s*if(\s+|$)/,false))s="block";return"keyword"}if(a.propertyIsEnumerable(r))return"builtin";return"variable"}else if(n=="%"){if(e.skipTo("%"))e.next();return"variable-2"}else if(n=="<"&&e.eat("-")){return"arrow"}else if(n=="="&&t.ctx.argList){return"arg-is"}else if(o.test(n)){if(n=="$")return"dollar";e.eatWhile(o);return"operator"}else if(/[\(\){}\[\];]/.test(n)){s=n;if(n==";")return"semi";return null}else{return null}}function d(i){return function(e,t){if(e.eat("\\")){var n=e.next();if(n=="x")e.match(/^[a-f0-9]{2}/i);else if((n=="u"||n=="U")&&e.eat("{")&&e.skipTo("}"))e.next();else if(n=="u")e.match(/^[a-f0-9]{4}/i);else if(n=="U")e.match(/^[a-f0-9]{8}/i);else if(/[0-7]/.test(n))e.match(/^[0-7]{1,2}/);return"string-2"}else{var r;while((r=e.next())!=null){if(r==i){t.tokenize=c;break}if(r=="\\"){e.backUp(1);break}}return"string"}}}function p(e,t,n){e.ctx={type:t,indent:e.indent,align:null,column:n.column(),prev:e.ctx}}function m(e){e.indent=e.ctx.indent;e.ctx=e.ctx.prev}return{startState:function(){return{tokenize:c,ctx:{type:"top",indent:-l.indentUnit,align:false},indent:0,afterIdent:false}},token:function(e,t){if(e.sol()){if(t.ctx.align==null)t.ctx.align=false;t.indent=e.indentation()}if(e.eatSpace())return null;var n=t.tokenize(e,t);if(n!="comment"&&t.ctx.align==null)t.ctx.align=true;var r=t.ctx.type;if((s==";"||s=="{"||s=="}")&&r=="block")m(t);if(s=="{")p(t,"}",e);else if(s=="("){p(t,")",e);if(t.afterIdent)t.ctx.argList=true}else if(s=="[")p(t,"]",e);else if(s=="block")p(t,"block",e);else if(s==r)m(t);t.afterIdent=n=="variable"||n=="keyword";return n},indent:function(e,t){if(e.tokenize!=c)return 0;var n=t&&t.charAt(0),r=e.ctx,i=n==r.type;if(r.type=="block")return r.indent+(n=="{"?0:l.indentUnit);else if(r.align)return r.column+(i?0:1);else return r.indent+(i?0:l.indentUnit)},lineComment:"#"}});e.defineMIME("text/x-rsrc","r")});