(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(l){var a=l.Pos;function p(e,t){for(var r=0,n=e.length;r<n;++r)t(e[r])}function d(e,t){if(!Array.prototype.indexOf){var r=e.length;while(r--){if(e[r]===t){return true}}return false}return e.indexOf(t)!=-1}function r(e,t,r,n){var i=e.getCursor(),s=r(e,i);if(/\b(?:string|comment)\b/.test(s.type))return;s.state=l.innerMode(e.getMode(),s.state).state;if(!/^[\w$_]*$/.test(s.string)){s={start:i.ch,end:i.ch,string:"",state:s.state,type:s.string=="."?"property":null}}else if(s.end>i.ch){s.end=i.ch;s.string=s.string.slice(0,i.ch-s.start)}var o=s;while(o.type=="property"){o=r(e,a(i.line,o.start));if(o.string!=".")return;o=r(e,a(i.line,o.start));if(!f)var f=[];f.push(o)}return{list:c(s,f,t,n),from:a(i.line,s.start),to:a(i.line,s.end)}}function e(e,t){return r(e,i,function(e,t){return e.getTokenAt(t)},t)}l.registerHelper("hint","javascript",e);function n(e,t){var r=e.getTokenAt(t);if(t.ch==r.start+1&&r.string.charAt(0)=="."){r.end=r.start;r.string=".";r.type="property"}else if(/^\.[\w$_]*$/.test(r.string)){r.type="property";r.start++;r.string=r.string.replace(/\./,"")}return r}function t(e,t){return r(e,s,n,t)}l.registerHelper("hint","coffeescript",t);var h=("charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight "+"toUpperCase toLowerCase split concat match replace search").split(" ");var g=("length concat join splice push pop shift unshift slice reverse sort indexOf "+"lastIndexOf every some filter forEach map reduce reduceRight ").split(" ");var y="prototype apply call bind".split(" ");var i=("break case catch continue debugger default delete do else false finally for function "+"if in instanceof new null return switch throw true try typeof var void while with").split(" ");var s=("and break catch class continue delete do else extends false finally for "+"if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes").split(" ");function c(e,t,r,n){var i=[],s=e.string,o=n&&n.globalScope||window;function f(e){if(e.lastIndexOf(s,0)==0&&!d(i,e))i.push(e)}function l(e){if(typeof e=="string")p(h,f);else if(e instanceof Array)p(g,f);else if(e instanceof Function)p(y,f);for(var t in e)f(t)}if(t&&t.length){var a=t.pop(),c;if(a.type&&a.type.indexOf("variable")===0){if(n&&n.additionalContext)c=n.additionalContext[a.string];if(!n||n.useGlobalScope!==false)c=c||o[a.string]}else if(a.type=="string"){c=""}else if(a.type=="atom"){c=1}else if(a.type=="function"){if(o.jQuery!=null&&(a.string=="$"||a.string=="jQuery")&&typeof o.jQuery=="function")c=o.jQuery();else if(o._!=null&&a.string=="_"&&typeof o._=="function")c=o._()}while(c!=null&&t.length)c=c[t.pop().string];if(c!=null)l(c)}else{for(var u=e.state.localVars;u;u=u.next)f(u.name);for(var u=e.state.globalVars;u;u=u.next)f(u.name);if(!n||n.useGlobalScope!==false)l(o);p(r,f)}return i}});