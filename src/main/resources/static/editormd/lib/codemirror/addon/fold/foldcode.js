(function(n){if(typeof exports=="object"&&typeof module=="object")n(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],n);else n(CodeMirror)})(function(a){"use strict";function i(i,t,n,f){if(n&&n.call){var l=n;n=null}else{var l=s(i,n,"rangeFinder")}if(typeof t=="number")t=a.Pos(t,0);var d=s(i,n,"minFoldSize");function e(n){var e=l(i,t);if(!e||e.to.line-e.from.line<d)return null;var o=i.findMarksAt(e.from);for(var r=0;r<o.length;++r){if(o[r].__isFold&&f!=="fold"){if(!n)return null;e.cleared=true;o[r].clear()}}return e}var o=e(true);if(s(i,n,"scanUp"))while(!o&&t.line>i.firstLine()){t=a.Pos(t.line-1,0);o=e(false)}if(!o||o.cleared||f==="unfold")return;var r=c(i,n);a.on(r,"mousedown",function(n){u.clear();a.e_preventDefault(n)});var u=i.markText(o.from,o.to,{replacedWith:r,clearOnEnter:true,__isFold:true});u.on("clear",function(n,e){a.signal(i,"unfold",i,n,e)});a.signal(i,"fold",i,o.from,o.to)}function c(n,e){var o=s(n,e,"widget");if(typeof o=="string"){var r=document.createTextNode(o);o=document.createElement("span");o.appendChild(r);o.className="CodeMirror-foldmarker"}return o}a.newFoldFunction=function(o,r){return function(n,e){i(n,e,{rangeFinder:o,widget:r})}};a.defineExtension("foldCode",function(n,e,o){i(this,n,e,o)});a.defineExtension("isFolded",function(n){var e=this.findMarksAt(n);for(var o=0;o<e.length;++o)if(e[o].__isFold)return true});a.commands.toggleFold=function(n){n.foldCode(n.getCursor())};a.commands.fold=function(n){n.foldCode(n.getCursor(),null,"fold")};a.commands.unfold=function(n){n.foldCode(n.getCursor(),null,"unfold")};a.commands.foldAll=function(o){o.operation(function(){for(var n=o.firstLine(),e=o.lastLine();n<=e;n++)o.foldCode(a.Pos(n,0),null,"fold")})};a.commands.unfoldAll=function(o){o.operation(function(){for(var n=o.firstLine(),e=o.lastLine();n<=e;n++)o.foldCode(a.Pos(n,0),null,"unfold")})};a.registerHelper("fold","combine",function(){var i=Array.prototype.slice.call(arguments,0);return function(n,e){for(var o=0;o<i.length;++o){var r=i[o](n,e);if(r)return r}}});a.registerHelper("fold","auto",function(n,e){var o=n.getHelpers(e,"fold");for(var r=0;r<o.length;r++){var i=o[r](n,e);if(i)return i}});var t={rangeFinder:a.fold.auto,widget:"â†”",minFoldSize:0,scanUp:false};a.defineOption("foldOptions",null);function s(n,e,o){if(e&&e[o]!==undefined)return e[o];var r=n.options.foldOptions;if(r&&r[o]!==undefined)return r[o];return t[o]}a.defineExtension("foldOption",function(n,e){return s(this,n,e)})});