(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(c){function d(e,o,n){var t=e.getWrapperElement();var i;i=t.appendChild(document.createElement("div"));if(n)i.className="CodeMirror-dialog CodeMirror-dialog-bottom";else i.className="CodeMirror-dialog CodeMirror-dialog-top";if(typeof o=="string"){i.innerHTML=o}else{i.appendChild(o)}return i}function p(e,o){if(e.state.currentNotificationClose)e.state.currentNotificationClose();e.state.currentNotificationClose=o}c.defineExtension("openDialog",function(e,o,n){if(!n)n={};p(this,null);var t=d(this,e,n.bottom);var i=false,r=this;function f(e){if(typeof e=="string"){u.value=e}else{if(i)return;i=true;t.parentNode.removeChild(t);r.focus();if(n.onClose)n.onClose(t)}}var u=t.getElementsByTagName("input")[0],l;if(u){if(n.value){u.value=n.value;u.select()}if(n.onInput)c.on(u,"input",function(e){n.onInput(e,u.value,f)});if(n.onKeyUp)c.on(u,"keyup",function(e){n.onKeyUp(e,u.value,f)});c.on(u,"keydown",function(e){if(n&&n.onKeyDown&&n.onKeyDown(e,u.value,f)){return}if(e.keyCode==27||n.closeOnEnter!==false&&e.keyCode==13){u.blur();c.e_stop(e);f()}if(e.keyCode==13)o(u.value,e)});if(n.closeOnBlur!==false)c.on(u,"blur",f);u.focus()}else if(l=t.getElementsByTagName("button")[0]){c.on(l,"click",function(){f();r.focus()});if(n.closeOnBlur!==false)c.on(l,"blur",f);l.focus()}return f});c.defineExtension("openConfirm",function(e,o,n){p(this,null);var t=d(this,e,n&&n.bottom);var i=t.getElementsByTagName("button");var r=false,f=this,u=1;function l(){if(r)return;r=true;t.parentNode.removeChild(t);f.focus()}i[0].focus();for(var a=0;a<i.length;++a){var s=i[a];(function(o){c.on(s,"click",function(e){c.e_preventDefault(e);l();if(o)o(f)})})(o[a]);c.on(s,"blur",function(){--u;setTimeout(function(){if(u<=0)l()},200)});c.on(s,"focus",function(){++u})}});c.defineExtension("openNotification",function(e,o){p(this,f);var n=d(this,e,o&&o.bottom);var t=false,i;var r=o&&typeof o.duration!=="undefined"?o.duration:5e3;function f(){if(t)return;t=true;clearTimeout(i);n.parentNode.removeChild(n)}c.on(n,"click",function(e){c.e_preventDefault(e);f()});if(r)i=setTimeout(f,r);return f})});