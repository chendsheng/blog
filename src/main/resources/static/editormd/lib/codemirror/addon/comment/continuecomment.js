(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(C){var e=["clike","css","javascript"];for(var n=0;n<e.length;++n)C.extendMode(e[n],{blockCommentContinue:" * "});function r(n){if(n.getOption("disableInput"))return C.Pass;var t=n.listSelections(),e,o=[];for(var i=0;i<t.length;i++){var r=t[i].head,l=n.getTokenAt(r);if(l.type!="comment")return C.Pass;var f=C.innerMode(n.getMode(),l.state).mode;if(!e)e=f;else if(e!=f)return C.Pass;var m=null;if(e.blockCommentStart&&e.blockCommentContinue){var s=l.string.indexOf(e.blockCommentEnd);var a=n.getRange(C.Pos(r.line,0),C.Pos(r.line,l.end)),c;if(s!=-1&&s==l.string.length-e.blockCommentEnd.length&&r.ch>=s){}else if(l.string.indexOf(e.blockCommentStart)==0){m=a.slice(0,l.start);if(!/^\s*$/.test(m)){m="";for(var u=0;u<l.start;++u)m+=" "}}else if((c=a.indexOf(e.blockCommentContinue))!=-1&&c+e.blockCommentContinue.length>l.start&&/^\s*$/.test(a.slice(0,c))){m=a.slice(0,c)}if(m!=null)m+=e.blockCommentContinue}if(m==null&&e.lineComment&&g(n)){var d=n.getLine(r.line),c=d.indexOf(e.lineComment);if(c>-1){m=d.slice(0,c);if(/\S/.test(m))m=null;else m+=e.lineComment+d.slice(c+e.lineComment.length).match(/^\s*/)[0]}}if(m==null)return C.Pass;o[i]="\n"+m}n.operation(function(){for(var e=t.length-1;e>=0;e--)n.replaceRange(o[e],t[e].from(),t[e].to(),"+insert")})}function g(e){var n=e.getOption("continueComments");if(n&&typeof n=="object")return n.continueLineComment!==false;return true}C.defineOption("continueComments",null,function(e,n,t){if(t&&t!=C.Init)e.removeKeyMap("continueComment");if(n){var o="Enter";if(typeof n=="string")o=n;else if(typeof n=="object"&&n.key)o=n.key;var i={name:"continueComment"};i[o]=r;e.addKeyMap(i)}})});