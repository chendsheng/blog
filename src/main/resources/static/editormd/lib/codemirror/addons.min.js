!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){o.defineOption("showTrailingSpace",!1,function(e,t,n){n==o.Init&&(n=!1),n&&!t?e.removeOverlay("trailingspace"):!n&&t&&e.addOverlay({token:function(e){for(var t=e.string.length,n=t;n&&/\s/.test(e.string.charAt(n-1));--n);return n>e.pos?(e.pos=n,null):(e.pos=t,"trailingspace")},name:"trailingspace"})})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(u){function d(e,t,n){var o,r=e.getWrapperElement();return o=r.appendChild(document.createElement("div")),n?o.className="CodeMirror-dialog CodeMirror-dialog-bottom":o.className="CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?o.innerHTML=t:o.appendChild(t),o}function h(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}u.defineExtension("openDialog",function(e,t,n){function o(e){if("string"==typeof e)s.value=e;else{if(a)return;a=!0,i.parentNode.removeChild(i),l.focus(),n.onClose&&n.onClose(i)}}n||(n={}),h(this,null);var r,i=d(this,e,n.bottom),a=!1,l=this,s=i.getElementsByTagName("input")[0];return s?(n.value&&(s.value=n.value,s.select()),n.onInput&&u.on(s,"input",function(e){n.onInput(e,s.value,o)}),n.onKeyUp&&u.on(s,"keyup",function(e){n.onKeyUp(e,s.value,o)}),u.on(s,"keydown",function(e){n&&n.onKeyDown&&n.onKeyDown(e,s.value,o)||((27==e.keyCode||n.closeOnEnter!==!1&&13==e.keyCode)&&(s.blur(),u.e_stop(e),o()),13==e.keyCode&&t(s.value,e))}),n.closeOnBlur!==!1&&u.on(s,"blur",o),s.focus()):(r=i.getElementsByTagName("button")[0])&&(u.on(r,"click",function(){o(),l.focus()}),n.closeOnBlur!==!1&&u.on(r,"blur",o),r.focus()),o}),u.defineExtension("openConfirm",function(e,t,n){function o(){a||(a=!0,r.parentNode.removeChild(r),l.focus())}h(this,null);var r=d(this,e,n&&n.bottom),i=r.getElementsByTagName("button"),a=!1,l=this,s=1;i[0].focus();for(var f=0;f<i.length;++f){var c=i[f];!function(t){u.on(c,"click",function(e){u.e_preventDefault(e),o(),t&&t(l)})}(t[f]),u.on(c,"blur",function(){--s,setTimeout(function(){0>=s&&o()},200)}),u.on(c,"focus",function(){++s})}}),u.defineExtension("openNotification",function(e,t){function n(){i||(i=!0,clearTimeout(o),r.parentNode.removeChild(r))}h(this,n);var o,r=d(this,e,t&&t.bottom),i=!1,a=t&&"undefined"!=typeof t.duration?t.duration:5e3;return u.on(r,"click",function(e){u.e_preventDefault(e),n()}),a&&(o=setTimeout(n,a)),n})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(i){"use strict";function o(f,s,e,t){if(this.atOccurrence=!1,this.doc=f,null==t&&"string"==typeof s&&(t=!1),e=e?f.clipPos(e):h(0,0),this.pos={from:e,to:e},"string"!=typeof s)s.global||(s=new RegExp(s.source,s.ignoreCase?"ig":"g")),this.matches=function(e,t){if(e){s.lastIndex=0;for(var n,o,r=f.getLine(t.line).slice(0,t.ch),i=0;;){s.lastIndex=i;var a=s.exec(r);if(!a)break;if(n=a,o=n.index,i=n.index+(n[0].length||1),i==r.length)break}var l=n&&n[0].length||0;l||(0==o&&0==r.length?n=void 0:o!=f.getLine(t.line).length&&l++)}else{s.lastIndex=t.ch;var r=f.getLine(t.line),n=s.exec(r),l=n&&n[0].length||0,o=n&&n.index;o+l==r.length||l||(l=1)}return n&&l?{from:h(t.line,o),to:h(t.line,o+l),match:n}:void 0};else{var i=s;t&&(s=s.toLowerCase());var c=t?function(e){return e.toLowerCase()}:function(e){return e},u=s.split("\n");if(1==u.length)s.length?this.matches=function(e,t){if(e){var n=f.getLine(t.line).slice(0,t.ch),o=c(n),r=o.lastIndexOf(s);if(r>-1)return r=a(n,o,r),{from:h(t.line,r),to:h(t.line,r+i.length)}}else{var n=f.getLine(t.line).slice(t.ch),o=c(n),r=o.indexOf(s);if(r>-1)return r=a(n,o,r)+t.ch,{from:h(t.line,r),to:h(t.line,r+i.length)}}}:this.matches=function(){};else{var d=i.split("\n");this.matches=function(e,t){var n=u.length-1;if(e){if(t.line-(u.length-1)<f.firstLine())return;if(c(f.getLine(t.line).slice(0,d[n].length))!=u[u.length-1])return;for(var o=h(t.line,d[n].length),r=t.line-1,i=n-1;i>=1;--i,--r)if(u[i]!=c(f.getLine(r)))return;var a=f.getLine(r),l=a.length-d[0].length;if(c(a.slice(l))!=u[0])return;return{from:h(r,l),to:o}}if(!(t.line+(u.length-1)>f.lastLine())){var a=f.getLine(t.line),l=a.length-d[0].length;if(c(a.slice(l))==u[0]){for(var s=h(t.line,l),r=t.line+1,i=1;n>i;++i,++r)if(u[i]!=c(f.getLine(r)))return;if(c(f.getLine(r).slice(0,d[n].length))==u[n])return{from:s,to:h(r,d[n].length)}}}}}}}function a(e,t,n){if(e.length==t.length)return n;for(var o=Math.min(n,e.length);;){var r=e.slice(0,o).toLowerCase().length;if(n>r)++o;else{if(!(r>n))return o;--o}}}var h=i.Pos;o.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=h(e,0);return n.pos={from:t,to:t},n.atOccurrence=!1,!1}for(var n=this,o=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,o))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!o.line)return t(0);o=h(o.line-1,this.doc.getLine(o.line-1).length)}else{var r=this.doc.lineCount();if(o.line==r-1)return t(r);o=h(o.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(e){if(this.atOccurrence){var t=i.splitLines(e);this.doc.replaceRange(t,this.pos.from,this.pos.to),this.pos.to=h(this.pos.from.line+t.length-1,t[t.length-1].length+(1==t.length?this.pos.from.ch:0))}}},i.defineExtension("getSearchCursor",function(e,t,n){return new o(this.doc,e,t,n)}),i.defineDocExtension("getSearchCursor",function(e,t,n){return new o(this,e,t,n)}),i.defineExtension("selectMatches",function(e,t){for(var n,o=[],r=this.getSearchCursor(e,this.getCursor("from"),t);(n=r.findNext())&&!(i.cmpPos(r.to(),this.getCursor("to"))>0);)o.push({anchor:r.from(),head:r.to()});o.length&&this.setSelections(o,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(r){"use strict";function i(n,e){return"string"==typeof n?n=new RegExp(n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e?"gi":"g"):n.global||(n=new RegExp(n.source,n.ignoreCase?"gi":"g")),{token:function(e){n.lastIndex=e.pos;var t=n.exec(e.string);return t&&t.index==e.pos?(e.pos+=t[0].length,"searching"):void(t?e.pos=t.index:e.skipToEnd())}}}function t(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function a(e){return e.state.search||(e.state.search=new t)}function l(e){return"string"==typeof e&&e==e.toLowerCase()}function s(e,t,n){return e.getSearchCursor(t,n,l(t))}function f(e,t,n,o,r){e.openDialog?e.openDialog(t,r,{value:o}):r(prompt(n,o))}function c(e,t,n,o){e.openConfirm?e.openConfirm(t,o):confirm(n)&&o[0]()}function u(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function n(t,n){var o=a(t);return o.query?d(t,n):void f(t,e,"Search for:",t.getSelection(),function(e){t.operation(function(){e&&!o.query&&(o.query=u(e),t.removeOverlay(o.overlay,l(o.query)),o.overlay=i(o.query,l(o.query)),t.addOverlay(o.overlay),t.showMatchesOnScrollbar&&(o.annotate&&(o.annotate.clear(),o.annotate=null),o.annotate=t.showMatchesOnScrollbar(o.query,l(o.query))),o.posFrom=o.posTo=t.getCursor(),d(t,n))})})}function d(n,o){n.operation(function(){var e=a(n),t=s(n,e.query,o?e.posFrom:e.posTo);(t.find(o)||(t=s(n,e.query,o?r.Pos(n.lastLine()):r.Pos(n.firstLine(),0)),t.find(o)))&&(n.setSelection(t.from(),t.to()),n.scrollIntoView({from:t.from(),to:t.to()}),e.posFrom=t.from(),e.posTo=t.to())})}function h(t){t.operation(function(){var e=a(t);e.query&&(e.query=null,t.removeOverlay(e.overlay),e.annotate&&(e.annotate.clear(),e.annotate=null))})}function o(a,e){a.getOption("readOnly")||f(a,p,"Replace:",a.getSelection(),function(i){i&&(i=u(i),f(a,m,"Replace with:","",function(t){if(e)a.operation(function(){for(var e=s(a,i);e.findNext();)if("string"!=typeof i){var n=a.getRange(e.from(),e.to()).match(i);e.replace(t.replace(/\$(\d)/g,function(e,t){return n[t]}))}else e.replace(t)});else{h(a);var o=s(a,i,a.getCursor()),r=function(){var e,t=o.from();!(e=o.findNext())&&(o=s(a,i),!(e=o.findNext())||t&&o.from().line==t.line&&o.from().ch==t.ch)||(a.setSelection(o.from(),o.to()),a.scrollIntoView({from:o.from(),to:o.to()}),c(a,g,"Replace?",[function(){n(e)},r]))},n=function(n){o.replace("string"==typeof i?t:t.replace(/\$(\d)/g,function(e,t){return n[t]})),r()};r()}}))})}var e='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',p='Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',m='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',g="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";r.commands.find=function(e){h(e),n(e)},r.commands.findNext=n,r.commands.findPrev=function(e){n(e,!0)},r.commands.clearSearch=h,r.commands.replace=o,r.commands.replaceAll=function(e){o(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function n(e){clearTimeout(o.doRedraw),o.doRedraw=setTimeout(function(){o.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var o=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(o.doUpdate),o.doUpdate=setTimeout(function(){o.computeScale()&&n(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),t.listenForChanges!==!1&&e.on("change",this.changeHandler=function(){n(250)})}e.defineExtension("annotateScrollbar",function(e){return"string"==typeof e&&(e={className:e}),new t(this,e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,t=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.heightAtLine(e.lastLine()+1,"local");return t!=this.hScale?(this.hScale=t,!0):void 0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){e!==!1&&this.computeScale();var t=this.cm,n=this.hScale,o=document.createDocumentFragment(),r=this.annotations;if(t.display.barWidth)for(var i,a=0;a<r.length;a++){for(var l=r[a],s=i||t.charCoords(l.from,"local").top*n,f=t.charCoords(l.to,"local").bottom*n;a<r.length-1&&(i=t.charCoords(r[a+1].from,"local").top*n,!(i>f+.9));)l=r[++a],f=t.charCoords(l.to,"local").bottom*n;if(f!=s){var c=Math.max(f-s,3),u=o.appendChild(document.createElement("div"));u.style.cssText="position: absolute; right: 0px; width: "+Math.max(t.display.barWidth-1,2)+"px; top: "+(s+this.buttonHeight)+"px; height: "+c+"px",u.className=this.options.className}}this.div.textContent="",this.div.appendChild(o)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("change",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(f){"use strict";function o(e,t,n,o){this.cm=e;var r={listenForChanges:!1};for(var i in o)r[i]=o[i];r.className||(r.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(r),this.query=t,this.caseFold=n,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var a=this;e.on("change",this.changeHandler=function(e,t){a.onChange(t)})}function c(e,t,n){return t>=e?e:Math.max(t,e+n)}f.defineExtension("showMatchesOnScrollbar",function(e,t,n){return"string"==typeof n&&(n={className:n}),n||(n={}),new o(this,e,t,n)});var r=1e3;o.prototype.findMatches=function(){if(this.gap){for(var e=0;e<this.matches.length;e++){var t=this.matches[e];if(t.from.line>=this.gap.to)break;t.to.line>=this.gap.from&&this.matches.splice(e--,1)}for(var n=this.cm.getSearchCursor(this.query,f.Pos(this.gap.from,0),this.caseFold);n.findNext();){var t={from:n.from(),to:n.to()};if(t.from.line>=this.gap.to)break;if(this.matches.splice(e++,0,t),this.matches.length>r)break}this.gap=null}},o.prototype.onChange=function(e){var t=e.from.line,n=f.changeEnd(e).line,o=n-e.to.line;if(this.gap?(this.gap.from=Math.min(c(this.gap.from,t,o),e.from.line),this.gap.to=Math.max(c(this.gap.to,t,o),e.from.line)):this.gap={from:e.from.line,to:n+1},o)for(var r=0;r<this.matches.length;r++){var i=this.matches[r],a=c(i.from.line,t,o);a!=i.from.line&&(i.from=f.Pos(a,i.from.ch));var l=c(i.to.line,t,o);l!=i.to.line&&(i.to=f.Pos(l,i.to.ch))}clearTimeout(this.update);var s=this;this.update=setTimeout(function(){s.updateAfterChange()},250)},o.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},o.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(i){function a(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function o(e){a(e);var t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.className="CodeMirror-placeholder",t.appendChild(document.createTextNode(e.getOption("placeholder"))),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function l(e){r(e)&&o(e)}function s(e){var t=e.getWrapperElement(),n=r(e);t.className=t.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),n?o(e):a(e)}function r(e){return 1===e.lineCount()&&""===e.getLine(0)}i.defineOption("placeholder","",function(e,t,n){var o=n&&n!=i.Init;if(t&&!o)e.on("blur",l),e.on("change",s),s(e);else if(!t&&o){e.off("blur",l),e.off("change",s),a(e);var r=e.getWrapperElement();r.className=r.className.replace(" CodeMirror-empty","")}t&&!e.hasFocus()&&l(e)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(v){function r(e){if(e.getOption("disableInput"))return v.Pass;for(var t=e.listSelections(),n=[],o=0;o<t.length;o++){if(!t[o].empty())return v.Pass;var r=t[o].head,i=e.getTokenAt(r),a=v.innerMode(e.getMode(),i.state),l=a.state;if("xml"!=a.mode.name||!l.tagName)return v.Pass;var s=e.getOption("autoCloseTags"),f="html"==a.mode.configuration,c="object"==typeof s&&s.dontCloseTags||f&&C,u="object"==typeof s&&s.indentTags||f&&x,d=l.tagName;i.end>r.ch&&(d=d.slice(0,d.length-i.end+r.ch));var h=d.toLowerCase();if(!d||"string"==i.type&&(i.end!=r.ch||!/[\"\']/.test(i.string.charAt(i.string.length-1))||1==i.string.length)||"tag"==i.type&&"closeTag"==l.type||i.string.indexOf("/")==i.string.length-1||c&&y(c,h)>-1||b(e,d,r,l,!0))return v.Pass;var p=u&&y(u,h)>-1;n[o]={indent:p,text:">"+(p?"\n\n":"")+"</"+d+">",newPos:p?v.Pos(r.line+1,0):v.Pos(r.line,r.ch+1)}}for(var o=t.length-1;o>=0;o--){var m=n[o];e.replaceRange(m.text,t[o].head,t[o].anchor,"+insert");var g=e.listSelections().slice(0);g[o]={head:m.newPos,anchor:m.newPos},e.setSelections(g),m.indent&&(e.indentLine(m.newPos.line,null,!0),e.indentLine(m.newPos.line+1,null,!0))}}function t(e,t){for(var n=e.listSelections(),o=[],r=t?"/":"</",i=0;i<n.length;i++){if(!n[i].empty())return v.Pass;var a=n[i].head,l=e.getTokenAt(a),s=v.innerMode(e.getMode(),l.state),f=s.state;if(t&&("string"==l.type||"<"!=l.string.charAt(0)||l.start!=a.ch-1))return v.Pass;if("xml"!=s.mode.name)if("htmlmixed"==e.getMode().name&&"javascript"==s.mode.name)o[i]=r+"script>";else{if("htmlmixed"!=e.getMode().name||"css"!=s.mode.name)return v.Pass;o[i]=r+"style>"}else{if(!f.context||!f.context.tagName||b(e,f.context.tagName,a,f))return v.Pass;o[i]=r+f.context.tagName+">"}}e.replaceSelections(o),n=e.listSelections();for(var i=0;i<n.length;i++)(i==n.length-1||n[i].head.line<n[i+1].head.line)&&e.indentLine(n[i].head.line)}function i(e){return e.getOption("disableInput")?v.Pass:t(e,!0)}function y(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;o>n;++n)if(e[n]==t)return n;return-1}function b(e,t,n,o,r){if(!v.scanForClosingTag)return!1;var i=Math.min(e.lastLine()+1,n.line+500),a=v.scanForClosingTag(e,n,null,i);if(!a||a.tag!=t)return!1;for(var l=o.context,s=r?1:0;l&&l.tagName==t;l=l.prev)++s;n=a.to;for(var f=1;s>f;f++){var c=v.scanForClosingTag(e,n,null,i);if(!c||c.tag!=t)return!1;n=c.to}return!0}v.defineOption("autoCloseTags",!1,function(e,t,n){if(n!=v.Init&&n&&e.removeKeyMap("autoCloseTags"),t){var o={name:"autoCloseTags"};("object"!=typeof t||t.whenClosing)&&(o["'/'"]=function(e){return i(e)}),("object"!=typeof t||t.whenOpening)&&(o["'>'"]=function(e){return r(e)}),e.addKeyMap(o)}});var C=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],x=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];v.commands.closeTag=function(e){return t(e)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(c){"use strict";function r(r,i,e,a){function t(e){var t=l(r,i);if(!t||t.to.line-t.from.line<s)return null;for(var n=r.findMarksAt(t.from),o=0;o<n.length;++o)if(n[o].__isFold&&"fold"!==a){if(!e)return null;t.cleared=!0,n[o].clear()}return t}if(e&&e.call){var l=e;e=null}else var l=d(r,e,"rangeFinder");"number"==typeof i&&(i=c.Pos(i,0));var s=d(r,e,"minFoldSize"),n=t(!0);if(d(r,e,"scanUp"))for(;!n&&i.line>r.firstLine();)i=c.Pos(i.line-1,0),n=t(!1);if(n&&!n.cleared&&"unfold"!==a){var o=u(r,e);c.on(o,"mousedown",function(e){f.clear(),c.e_preventDefault(e)});var f=r.markText(n.from,n.to,{replacedWith:o,clearOnEnter:!0,__isFold:!0});f.on("clear",function(e,t){c.signal(r,"unfold",r,e,t)}),c.signal(r,"fold",r,n.from,n.to)}}function u(e,t){var n=d(e,t,"widget");if("string"==typeof n){var o=document.createTextNode(n);n=document.createElement("span"),n.appendChild(o),n.className="CodeMirror-foldmarker"}return n}function d(e,t,n){if(t&&void 0!==t[n])return t[n];var o=e.options.foldOptions;return o&&void 0!==o[n]?o[n]:i[n]}c.newFoldFunction=function(n,o){return function(e,t){r(e,t,{rangeFinder:n,widget:o})}},c.defineExtension("foldCode",function(e,t,n){r(this,e,t,n)}),c.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),c.commands.toggleFold=function(e){e.foldCode(e.getCursor())},c.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},c.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},c.commands.foldAll=function(n){n.operation(function(){for(var e=n.firstLine(),t=n.lastLine();t>=e;e++)n.foldCode(c.Pos(e,0),null,"fold")})},c.commands.unfoldAll=function(n){n.operation(function(){for(var e=n.firstLine(),t=n.lastLine();t>=e;e++)n.foldCode(c.Pos(e,0),null,"unfold")})},c.registerHelper("fold","combine",function(){var r=Array.prototype.slice.call(arguments,0);return function(e,t){for(var n=0;n<r.length;++n){var o=r[n](e,t);if(o)return o}}}),c.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),o=0;o<n.length;o++){var r=n[o](e,t);if(r)return r}});var i={rangeFinder:c.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};c.defineOption("foldOptions",null),c.defineExtension("foldOption",function(e,t){return d(this,e,t)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(o){"use strict";function r(e){this.options=e,this.from=this.to=0}function i(e){return e===!0&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function f(e,t){for(var n=e.findMarksAt(p(t)),o=0;o<n.length;++o)if(n[o].__isFold&&n[o].find().from.line==t)return!0}function c(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function a(r,e,t){var i=r.state.foldGutter.options,a=e,l=r.foldOption(i,"minFoldSize"),s=r.foldOption(i,"rangeFinder");r.eachLine(e,t,function(e){var t=null;if(f(r,a))t=c(i.indicatorFolded);else{var n=p(a,0),o=s&&s(r,n);o&&o.to.line-o.from.line>=l&&(t=c(i.indicatorOpen))}r.setGutterMarker(e,i.gutter,t),++a})}function l(e){var t=e.getViewport(),n=e.state.foldGutter;n&&(e.operation(function(){a(e,t.from,t.to)}),n.from=t.from,n.to=t.to)}function s(e,t,n){var o=e.state.foldGutter;if(o){var r=o.options;n==r.gutter&&e.foldCode(p(t,0),r.rangeFinder)}}function u(e){var t=e.state.foldGutter;if(t){var n=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){l(e)},n.foldOnChangeTimeSpan||600)}}function d(t){var n=t.state.foldGutter;if(n){var e=n.options;clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout(function(){var e=t.getViewport();n.from==n.to||e.from-n.to>20||n.from-e.to>20?l(t):t.operation(function(){e.from<n.from&&(a(t,e.from,n.from),n.from=e.from),e.to>n.to&&(a(t,n.to,e.to),n.to=e.to)})},e.updateViewportTimeSpan||400)}}function h(e,t){var n=e.state.foldGutter;if(n){var o=t.line;o>=n.from&&o<n.to&&a(e,o,o+1)}}o.defineOption("foldGutter",!1,function(e,t,n){n&&n!=o.Init&&(e.clearGutter(e.state.foldGutter.options.gutter),e.state.foldGutter=null,e.off("gutterClick",s),e.off("change",u),e.off("viewportChange",d),e.off("fold",h),e.off("unfold",h),e.off("swapDoc",l)),t&&(e.state.foldGutter=new r(i(t)),l(e),e.on("gutterClick",s),e.on("change",u),e.on("viewportChange",d),e.on("fold",h),e.on("unfold",h),e.on("swapDoc",l))});var p=o.Pos}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(u){"use strict";u.registerHelper("fold","indent",function(e,t){var n=e.getOption("tabSize"),o=e.getLine(t.line);if(/\S/.test(o)){for(var r=function(e){return u.countColumn(e,null,n)},i=r(o),a=null,l=t.line+1,s=e.lastLine();s>=l;++l){var f=e.getLine(l),c=r(f);if(c>i)a=l;else if(/\S/.test(f))break}return a?{from:u.Pos(t.line,o.length),to:u.Pos(a,e.getLine(a).length)}:void 0}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(y){"use strict";y.registerHelper("fold","brace",function(r,i){function e(e){for(var t=i.ch,n=0;;){var o=0>=t?-1:s.lastIndexOf(e,t-1);if(-1!=o){if(1==n&&o<i.ch)break;if(a=r.getTokenTypeAt(y.Pos(l,o+1)),!/^(comment|string)/.test(a))return o+1;t=o-1}else{if(1==n)break;n=1,t=s.length}}}var t,a,l=i.line,s=r.getLine(l),n="{",o="}",t=e("{");if(null==t&&(n="[",o="]",t=e("[")),null!=t){var f,c,u=1,d=r.lastLine();e:for(var h=l;d>=h;++h)for(var p=r.getLine(h),m=h==l?t:0;;){var g=p.indexOf(n,m),v=p.indexOf(o,m);if(0>g&&(g=p.length),0>v&&(v=p.length),m=Math.min(g,v),m==p.length)break;if(r.getTokenTypeAt(y.Pos(h,m+1))==a)if(m==g)++u;else if(!--u){f=h,c=m;break e}++m}if(null!=f&&(l!=f||c!=t))return{from:y.Pos(l,t),to:y.Pos(f,c)}}}),y.registerHelper("fold","import",function(a,e){function t(e){if(e<a.firstLine()||e>a.lastLine())return null;var t=a.getTokenAt(y.Pos(e,1));if(/\S/.test(t.string)||(t=a.getTokenAt(y.Pos(e,t.end+1))),"keyword"!=t.type||"import"!=t.string)return null;for(var n=e,o=Math.min(a.lastLine(),e+10);o>=n;++n){var r=a.getLine(n),i=r.indexOf(";");if(-1!=i)return{startCh:t.end,end:y.Pos(n,i)}}}var n,e=e.line,o=t(e);if(!o||t(e-1)||(n=t(e-2))&&n.end.line==e-1)return null;for(var r=o.end;;){var i=t(r.line+1);if(null==i)break;r=i.end}return{from:a.clipPos(y.Pos(e,o.startCh+1)),to:r}}),y.registerHelper("fold","include",function(n,e){function t(e){if(e<n.firstLine()||e>n.lastLine())return null;var t=n.getTokenAt(y.Pos(e,1));return/\S/.test(t.string)||(t=n.getTokenAt(y.Pos(e,t.end+1))),"meta"==t.type&&"#include"==t.string.slice(0,8)?t.start+8:void 0}var e=e.line,o=t(e);if(null==o||null!=t(e-1))return null;for(var r=e;;){var i=t(r+1);if(null==i)break;++r}return{from:y.Pos(e,o+1),to:n.clipPos(y.Pos(r))}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function s(e,t){return e.line-t.line||e.ch-t.ch}function f(e,t,n,o){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=o?o.from:e.firstLine(),this.max=o?o.to-1:e.lastLine()}function r(e,t){var n=e.cm.getTokenTypeAt(g(e.line,t));return n&&/\btag\b/.test(n)}function i(e){return e.line>=e.max?void 0:(e.ch=0,e.text=e.cm.getLine(++e.line),!0)}function a(e){return e.line<=e.min?void 0:(e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0)}function c(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(i(e))continue;return}{if(r(e,t+1)){var n=e.text.lastIndexOf("/",t),o=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,o?"selfClose":"regular"}e.ch=t+1}}}function u(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(a(e))continue;return}if(r(e,t+1)){o.lastIndex=t,e.ch=t;var n=o.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function d(e){for(;;){o.lastIndex=e.ch;var t=o.exec(e.text);if(!t){if(i(e))continue;return}{if(r(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function h(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(a(e))continue;return}{if(r(e,t+1)){var n=e.text.lastIndexOf("/",t),o=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,o?"selfClose":"regular"}e.ch=t}}}function p(e,t){for(var n=[];;){var o,r=d(e),i=e.line,a=e.ch-(r?r[0].length:0);if(!r||!(o=c(e)))return;if("selfClose"!=o)if(r[1]){for(var l=n.length-1;l>=0;--l)if(n[l]==r[2]){n.length=l;break}if(0>l&&(!t||t==r[2]))return{tag:r[2],from:g(i,a),to:g(e.line,e.ch)}}else n.push(r[2])}}function m(e,t){for(var n=[];;){var o=h(e);if(!o)return;if("selfClose"!=o){var r=e.line,i=e.ch,a=u(e);if(!a)return;if(a[1])n.push(a[2]);else{for(var l=n.length-1;l>=0;--l)if(n[l]==a[2]){n.length=l;break}if(0>l&&(!t||t==a[2]))return{tag:a[2],from:g(e.line,e.ch),to:g(r,i)}}}else u(e)}}var g=e.Pos,t="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=t+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",o=new RegExp("<(/?)(["+t+"]["+n+"]*)","g");e.registerHelper("fold","xml",function(e,t){for(var n=new f(e,t.line,0);;){var o,r=d(n);if(!r||n.line!=t.line||!(o=c(n)))return;if(!r[1]&&"selfClose"!=o){var t=g(n.line,n.ch),i=p(n,r[2]);return i&&{from:t,to:i.from}}}}),e.findMatchingTag=function(e,t,n){var o=new f(e,t.line,t.ch,n);if(-1!=o.text.indexOf(">")||-1!=o.text.indexOf("<")){var r=c(o),i=r&&g(o.line,o.ch),a=r&&u(o);if(r&&a&&!(s(o,t)>0)){var l={from:g(o.line,o.ch),to:i,tag:a[2]};return"selfClose"==r?{open:l,close:null,at:"open"}:a[1]?{open:m(o,a[2]),close:l,at:"close"}:(o=new f(e,i.line,i.ch,n),{open:l,close:p(o,a[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,n){for(var o=new f(e,t.line,t.ch,n);;){var r=m(o);if(!r)break;var i=new f(e,t.line,t.ch,n),a=p(i,r.tag);if(a)return{open:r,close:a}}},e.scanForClosingTag=function(e,t,n,o){var r=new f(e,t.line,t.ch,o?{from:0,to:o}:null);return p(r,n)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(u){"use strict";u.registerHelper("fold","markdown",function(n,e){function r(e){var t=n.getTokenTypeAt(u.Pos(e,0));return t&&/\bheader\b/.test(t)}function t(e,t,n){var o=t&&t.match(/^#+/);return o&&r(e)?o[0].length:(o=n&&n.match(/^[=\-]+\s*$/),o&&r(e+1)?"="==n[0]?1:2:i)}var i=100,o=n.getLine(e.line),a=n.getLine(e.line+1),l=t(e.line,o,a);if(l===i)return void 0;for(var s=n.lastLine(),f=e.line,c=n.getLine(f+2);s>f&&!(t(f+1,a,c)<=l);)++f,a=c,c=n.getLine(f+2);return{from:u.Pos(e.line,o.length),to:u.Pos(f,n.getLine(f).length)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(C){"use strict";C.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,t){var n=e.getModeAt(t),o=n.blockCommentStart,r=n.blockCommentEnd;if(o&&r){for(var i,a=t.line,l=e.getLine(a),s=t.ch,f=0;;){var c=0>=s?-1:l.lastIndexOf(o,s-1);if(-1!=c){if(1==f&&c<t.ch)return;if(/comment/.test(e.getTokenTypeAt(C.Pos(a,c+1)))){i=c+o.length;break}s=c-1}else{if(1==f)return;f=1,s=l.length}}var u,d,h=1,p=e.lastLine();e:for(var m=a;p>=m;++m)for(var g=e.getLine(m),v=m==a?i:0;;){var y=g.indexOf(o,v),b=g.indexOf(r,v);if(0>y&&(y=g.length),0>b&&(b=g.length),v=Math.min(y,b),v==g.length)break;if(v==y)++h;else if(!--h){u=m,d=v;break e}++v}if(null!=u&&(a!=u||d!=i))return{from:C.Pos(a,i),to:C.Pos(u,d)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(t){"use strict";t.overlayMode=function(n,o,r){return{startState:function(){return{base:t.startState(n),overlay:t.startState(o),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:t.copyState(n,e.base),overlay:t.copyState(o,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,t){return(e!=t.streamSeen||Math.min(t.basePos,t.overlayPos)<e.start)&&(t.streamSeen=e,t.basePos=t.overlayPos=e.start),e.start==t.basePos&&(t.baseCur=n.token(e,t.base),t.basePos=e.pos),e.start==t.overlayPos&&(e.pos=e.start,t.overlayCur=o.token(e,t.overlay),t.overlayPos=e.pos),e.pos=Math.min(t.basePos,t.overlayPos),null==t.overlayCur?t.baseCur:null!=t.baseCur&&t.overlay.combineTokens||r&&null==t.overlay.combineTokens?t.baseCur+" "+t.overlayCur:t.overlayCur},indent:n.indent&&function(e,t){return n.indent(e.base,t)},electricChars:n.electricChars,innerMode:function(e){return{state:e.base,mode:n}},blankLine:function(e){n.blankLine&&n.blankLine(e.base),o.blankLine&&o.blankLine(e.overlay)}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){"use strict";function a(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",f),e.removeLineClass(e.state.activeLines[t],"background",c)}function l(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function i(t,e){for(var n=[],o=0;o<e.length;o++){var r=e[o];if(r.empty()){var i=t.getLineHandleVisualStart(r.head.line);n[n.length-1]!=i&&n.push(i)}}l(t.state.activeLines,n)||t.operation(function(){a(t);for(var e=0;e<n.length;e++)t.addLineClass(n[e],"wrap",f),t.addLineClass(n[e],"background",c);t.state.activeLines=n})}function s(e,t){i(e,t.ranges)}var f="CodeMirror-activeline",c="CodeMirror-activeline-background";r.defineOption("styleActiveLine",!1,function(e,t,n){var o=n&&n!=r.Init;t&&!o?(e.state.activeLines=[],i(e,e.listSelections()),e.on("beforeSelectionChange",s)):!t&&o&&(e.off("beforeSelectionChange",s),a(e),delete e.state.activeLines)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(d){function a(e,t){var n=e.getRange(m(t.line,t.ch-1),m(t.line,t.ch+1));return 2==n.length?n:null}function h(e,t,n){var o=e.getLine(t.line),r=e.getTokenAt(t);if(/\bstring2?\b/.test(r.type))return!1;var i=new d.StringStream(o.slice(0,t.ch)+n+o.slice(t.ch),4);for(i.pos=i.start=r.start;;){var a=e.getMode().token(i,r.state);if(i.pos>=t.ch+1)return/\bstring2?\b/.test(a);i.start=i.pos}}function l(i,c){for(var e={name:"autoCloseBrackets",Backspace:function(e){if(e.getOption("disableInput"))return d.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){if(!t[n].empty())return d.Pass;var o=a(e,t[n].head);if(!o||i.indexOf(o)%2!=0)return d.Pass}for(var n=t.length-1;n>=0;n--){var r=t[n].head;e.replaceRange("",m(r.line,r.ch-1),m(r.line,r.ch+1))}}},u="",t=0;t<i.length;t+=2)(function(s,f){u+=f,e["'"+s+"'"]=function(n){if(n.getOption("disableInput"))return d.Pass;for(var o,e,t=n.listSelections(),r=0;r<t.length;r++){var i,a=t[r],l=a.head,e=n.getRange(l,m(l.line,l.ch+1));if(a.empty())if(s==f&&e==f)i=n.getRange(l,m(l.line,l.ch+3))==s+s+s?"skipThree":"skip";else if(s==f&&l.ch>1&&c.indexOf(s)>=0&&n.getRange(m(l.line,l.ch-2),l)==s+s&&(l.ch<=2||n.getRange(m(l.line,l.ch-3),m(l.line,l.ch-2))!=s))i="addFour";else if('"'==s||"'"==s){if(d.isWordChar(e)||!h(n,l,s))return d.Pass;i="both"}else{if(!(n.getLine(l.line).length==l.ch||u.indexOf(e)>=0||p.test(e)))return d.Pass;i="both"}else i="surround";if(o){if(o!=i)return d.Pass}else o=i}n.operation(function(){if("skip"==o)n.execCommand("goCharRight");else if("skipThree"==o)for(var e=0;3>e;e++)n.execCommand("goCharRight");else if("surround"==o){for(var t=n.getSelections(),e=0;e<t.length;e++)t[e]=s+t[e]+f;n.replaceSelections(t,"around")}else"both"==o?(n.replaceSelection(s+f,null),n.execCommand("goCharLeft")):"addFour"==o&&(n.replaceSelection(s+s+s+s,"before"),n.execCommand("goCharRight"))})},s!=f&&(e["'"+f+"'"]=function(e){for(var t=e.listSelections(),n=0;n<t.length;n++){var o=t[n];if(!o.empty()||e.getRange(o.head,m(o.head.line,o.head.ch+1))!=f)return d.Pass}e.execCommand("goCharRight")})})(i.charAt(t),i.charAt(t+1));return e}function s(r){return function(n){if(n.getOption("disableInput"))return d.Pass;for(var o=n.listSelections(),e=0;e<o.length;e++){if(!o[e].empty())return d.Pass;var t=a(n,o[e].head);if(!t||r.indexOf(t)%2!=0)return d.Pass}n.operation(function(){n.replaceSelection("\n\n",null),n.execCommand("goCharLeft"),o=n.listSelections();for(var e=0;e<o.length;e++){var t=o[e].head.line;n.indentLine(t,null,!0),n.indentLine(t+1,null,!0)}})}}var f="()[]{}''\"\"",c="'\"",u="[]{}",p=/\s/,m=d.Pos;d.defineOption("autoCloseBrackets",!1,function(e,t,n){if(n!=d.Init&&n&&e.removeKeyMap("autoCloseBrackets"),t){var o=f,r=c,i=u;"string"==typeof t?o=t:"object"==typeof t&&(null!=t.pairs&&(o=t.pairs),null!=t.triples&&(r=t.triples),null!=t.explode&&(i=t.explode));var a=l(o,r);i&&(a.Enter=s(i)),e.addKeyMap(a)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";function r(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function i(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}o.defineOption("fullScreen",!1,function(e,t,n){n==o.Init&&(n=!1),!n!=!t&&(t?r(e):i(e))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){"use strict";function i(e){"object"==typeof e&&(this.minChars=e.minChars,this.style=e.style,this.showToken=e.showToken,this.delay=e.delay,this.wordsOnly=e.wordsOnly),null==this.style&&(this.style=n),null==this.minChars&&(this.minChars=t),null==this.delay&&(this.delay=o),null==this.wordsOnly&&(this.wordsOnly=f),this.overlay=this.timeout=null}function a(e){var t=e.state.matchHighlighter;clearTimeout(t.timeout),t.timeout=setTimeout(function(){l(e)},t.delay)}function l(f){f.operation(function(){var e=f.state.matchHighlighter;if(e.overlay&&(f.removeOverlay(e.overlay),e.overlay=null),!f.somethingSelected()&&e.showToken){for(var t=e.showToken===!0?/[\w$]/:e.showToken,n=f.getCursor(),o=f.getLine(n.line),r=n.ch,i=r;r&&t.test(o.charAt(r-1));)--r;for(;i<o.length&&t.test(o.charAt(i));)++i;return void(i>r&&f.addOverlay(e.overlay=u(o.slice(r,i),t,e.style)))}var a=f.getCursor("from"),l=f.getCursor("to");if(a.line==l.line&&(!e.wordsOnly||c(f,a,l))){var s=f.getRange(a,l).replace(/^\s+|\s+$/g,"");s.length>=e.minChars&&f.addOverlay(e.overlay=u(s,!1,e.style))}})}function c(e,t,n){var o=e.getRange(t,n);if(null!==o.match(/^\w+$/)){if(t.ch>0){var r={line:t.line,ch:t.ch-1},i=e.getRange(r,t);if(null===i.match(/\W/))return!1}if(n.ch<e.getLine(t.line).length){var r={line:n.line,ch:n.ch+1},i=e.getRange(n,r);if(null===i.match(/\W/))return!1}return!0}return!1}function s(e,t){return!(e.start&&t.test(e.string.charAt(e.start-1))||e.pos!=e.string.length&&t.test(e.string.charAt(e.pos)))}function u(t,n,o){return{token:function(e){return!e.match(t)||n&&!s(e,n)?(e.next(),void(e.skipTo(t.charAt(0))||e.skipToEnd())):o}}}var t=2,n="matchhighlight",o=100,f=!1;r.defineOption("highlightSelectionMatches",!1,function(e,t,n){if(n&&n!=r.Init){var o=e.state.matchHighlighter.overlay;o&&e.removeOverlay(o),clearTimeout(e.state.matchHighlighter.timeout),e.state.matchHighlighter=null,e.off("cursorActivity",a)}t&&(e.state.matchHighlighter=new i(t),l(e),e.on("cursorActivity",a))})});