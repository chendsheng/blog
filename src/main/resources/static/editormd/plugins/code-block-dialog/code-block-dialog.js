(function(){var o=function(k){var b;var y="code-block-dialog";var x=k.codeLanguages={asp:["ASP","vbscript"],actionscript:["ActionScript(3.0)/Flash/Flex","clike"],bash:["Bash/Bat","shell"],css:["CSS","css"],c:["C","clike"],cpp:["C++","clike"],csharp:["C#","clike"],coffeescript:["CoffeeScript","coffeescript"],d:["D","d"],dart:["Dart","dart"],delphi:["Delphi/Pascal","pascal"],erlang:["Erlang","erlang"],go:["Golang","go"],groovy:["Groovy","groovy"],html:["HTML","text/html"],java:["Java","clike"],json:["JSON","text/json"],javascript:["Javascript","javascript"],lua:["Lua","lua"],less:["LESS","css"],markdown:["Markdown","gfm"],"objective-c":["Objective-C","clike"],php:["PHP","php"],perl:["Perl","perl"],python:["Python","python"],r:["R","r"],rst:["reStructedText","rst"],ruby:["Ruby","ruby"],sql:["SQL","sql"],sass:["SASS/SCSS","sass"],shell:["Shell","shell"],scala:["Scala","clike"],swift:["Swift","clike"],vb:["VB/VBScript","vb"],xml:["XML","text/xml"],yaml:["YAML","yaml"]};k.fn.codeBlockDialog=function(){var e=this;var o=this.cm;var a=this.lang;var t=this.editor;var r=this.settings;var i=o.getCursor();var l=o.getSelection();var n=this.classPrefix;var s=n+y,c;var d=a.dialog.codeBlock;o.focus();if(t.find("."+s).length>0){c=t.find("."+s);c.find("option:first").attr("selected","selected");c.find("textarea").val(l);this.dialogShowMask(c);this.dialogLockScreen();c.show()}else{var f='<div class="'+n+'code-toolbar">'+d.selectLabel+'<select><option selected="selected" value="">'+d.selectDefaultText+"</option></select>"+"</div>"+'<textarea placeholder="coding now...." style="display:none;">'+l+"</textarea>";c=this.createDialog({name:s,title:d.title,width:780,height:565,mask:r.dialogShowMask,drag:r.dialogDraggable,content:f,lockScreen:r.dialogLockScreen,maskStyle:{opacity:r.dialogMaskOpacity,backgroundColor:r.dialogMaskBgColor},buttons:{enter:[a.buttons.enter,function(){var e=this.find("textarea").val();var t=this.find("select").val();if(t===""){alert(a.dialog.codeBlock.unselectedLanguageAlert);return false}if(e===""){alert(a.dialog.codeBlock.codeEmptyAlert);return false}t=t==="other"?"":t;o.replaceSelection(["```"+t,e,"```"].join("\n"));if(t===""){o.setCursor(i.line,i.ch+3)}this.hide().lockScreen(false).hideMask();return false}],cancel:[a.buttons.cancel,function(){this.hide().lockScreen(false).hideMask();return false}]}})}var u=c.find("select");if(u.find("option").length===1){for(var h in x){var p=x[h];u.append('<option value="'+h+'" mode="'+p[1]+'">'+p[0]+"</option>")}u.append('<option value="other">'+d.otherLanguage+"</option>")}var g=u.find("option:selected").attr("mode");var v={mode:g?g:"text/html",theme:r.theme,tabSize:4,autofocus:true,autoCloseTags:true,indentUnit:4,lineNumbers:true,lineWrapping:true,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:true,indentWithTabs:true,styleActiveLine:true,styleSelectedText:true,autoCloseBrackets:true,showTrailingSpace:true,highlightSelectionMatches:true};var S=c.find("textarea");var m=c.find(".CodeMirror");if(c.find(".CodeMirror").length<1){b=k.$CodeMirror.fromTextArea(S[0],v);m=c.find(".CodeMirror");m.css({float:"none",margin:"8px 0",border:"1px solid #ddd",fontSize:r.fontSize,width:"100%",height:"390px"});b.on("change",function(e){S.val(e.getValue())})}else{b.setValue(o.getSelection())}u.change(function(){var e=$(this).find("option:selected").attr("mode");b.setOption("mode",e)})}};if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=o}else if(typeof define==="function"){if(define.amd){define(["editormd"],function(e){o(e)})}else{define(function(e){var t=e("./../../editormd");o(t)})}}else{o(window.editormd)}})();